$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
type: command

name: prepare_data
display_name: Prepare Data (Train/Val/Test Split, MLTable)
description: |-
  Simple example component for Azure ML with MLTable input and Train/Validation/Test MLTable outputs.

code: ./prepare_data/

environment: azureml:sklearn-with-mltable@latest

is_deterministic: true

inputs:
  input_dataset:
    type: mltable
    description: Input file (must be mltable)
  random_state: 
    type: integer
    default: 42
    optional: true

outputs:
  train_data:
    type: mltable
    description: Training dataset, MLTable, colocated `data.parquet` file
  validation_data:
    type: mltable
    description: Validation dataset, MLTable, colocated `data.parquet` file
  test_data:
    type: mltable
    description: Test dataset, MLTable, colocated `data.parquet` file

command: >-
  python prepare_data.py
  --input_dataset ${{inputs.input_dataset}}
  --train_data ${{outputs.train_data}}
  --test_data ${{outputs.test_data}}
  --validation_data ${{outputs.validation_data}}
  $[[--random_state ${{inputs.random_state}}]]
